<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Gamified To-Do</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="phone-frame">
    <header>
      <h1>{{ rank }}</h1>
      <div class="stats">
        Level: {{ level }} | XP: {{ xp }}/{{ xp_per_level }} | ðŸ”¥ Streak: {{ streak }}
      </div>
      <div class="progress-bar">
        <div class="progress-fill" style="width: {{ progress_percent }}%"></div>
      </div>
    </header>

    <main>
      {% for message in messages %}
        <div class="flash">{{ message }}</div>
      {% endfor %}

      <h2>Daily Tasks</h2>
      <ul>
        {% for task in daily_tasks %}
          <li class="{% if task.done %}done{% endif %}">
            <span>{{ task.text }} ({{ task.tier }})</span>
            {% if not task.done %}
              <form action="{{ url_for('complete_daily') }}" method="post" style="margin:0;">
                <input type="hidden" name="task_id" value="{{ task.id }}">
                <button type="submit">âœ”</button>
              </form>
            {% endif %}
          </li>
        {% endfor %}
      </ul>

      <h2>One-Time Tasks</h2>
      <ul>
        {% for task in one_time_tasks %}
          <li>
            <span>{{ task.text }}</span>
            <form action="{{ url_for('complete_one_time') }}" method="post" style="margin:0;">
              <input type="hidden" name="task_id" value="{{ task.id }}">
              <button type="submit">âœ”</button>
            </form>
          </li>
        {% endfor %}
      </ul>
    </main>

    <form class="add-task" action="{{ url_for('index') }}" method="post">
      <input type="text" name="task" placeholder="New task..." required>
      <select name="kind">
        <option value="daily">Daily</option>
        <option value="one_time">One-Time</option>
      </select>
      <select name="tier">
        <option value="easy">Easy (+{{ xp_easy }} XP)</option>
        <option value="medium">Medium (+{{ xp_medium }} XP)</option>
        <option value="hard">Hard (+{{ xp_hard }} XP)</option>
      </select>
      <button type="submit">Add Task</button>
    </form>
  </div>
</body>
</html>
